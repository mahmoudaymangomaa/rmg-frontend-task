<h1 class="text-xl font-bold mb-4">Products</h1>

<!-- Error -->
<div *ngIf="error()" class="bg-red-50 text-red-600 p-3 rounded mb-4">
    {{ error() }}
</div>

<!-- Form -->
<div class="bg-white p-4 rounded shadow mb-6">
    <div class="flex flex-col md:flex-row gap-3">
        <input class="border rounded px-3 py-2 flex-1" placeholder="Product name" [value]="name()"
            (input)="name.set($any($event.target).value)" />

        <input type="number" class="border rounded px-3 py-2 w-full md:w-32" placeholder="Price" [value]="price()"
            (input)="price.set(+$any($event.target).value)" />

        <input class="border rounded px-3 py-2 flex-1" placeholder="Description" [value]="description()"
            (input)="description.set($any($event.target).value)" />

        <button (click)="save()" [disabled]="loading()"
            class="bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50">
            {{ editingId() ? 'Save' : 'Add' }}
        </button>

        <button *ngIf="editingId()" (click)="resetForm()" class="border px-4 py-2 rounded">
            Cancel
        </button>
    </div>
</div>

<!-- Loading -->
<div *ngIf="loading()" class="text-center py-6 text-gray-500">
    Loading...
</div>

<!-- Empty -->
<div *ngIf="!loading() && products().length === 0" class="text-center py-10 text-gray-400">
    <p>No products found</p>
    <p class="text-sm">Start by adding your first product</p>
</div>

<!-- List -->
<div *ngFor="let p of products()" class="bg-white rounded shadow p-4 mb-2 flex justify-between items-start">
    <div>
        <strong>{{ p.name }}</strong>
        <span class="text-gray-500">â€” {{ p.price }} EGP</span>

        <div *ngIf="p.description" class="text-sm text-gray-400 mt-1">
            {{ p.description }}
        </div>
    </div>

    <div class="flex gap-3">
        <button (click)="edit(p)" class="text-blue-600 hover:underline">
            Edit
        </button>

        <button (click)="remove(p.id!)" class="text-red-600 hover:underline">
            Delete
        </button>
    </div>
</div>